(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){

var ko = require('knockout');
var components = require('ungit-components');

components.register('home', function(args) {
  return new HomeViewModel(args.app);
});

function HomeRepositoryViewModel(home, path) {
  this.home = home;
  this.app = home.app;
  this.server = this.app.server;
  this.path = path;
  this.title = path;
  this.link = ungit.config.rootPath + '/#/repository?path=' + encodeURIComponent(path);
  this.pathRemoved = ko.observable(false);
  this.remote = ko.observable('...');
  this.updateState();
}
HomeRepositoryViewModel.prototype.updateState = function() {
  var self = this;
  this.server.getPromise('/fs/exists?path=' + encodeURIComponent(this.path))
    .then(function(exists) { self.pathRemoved(!exists); });
  this.server.getPromise('/remotes/origin?path=' + encodeURIComponent(this.path))
    .then(function(remote) {	self.remote(remote.address.replace(/\/\/.*?\@/, "//***@")); })
    .catch(function(err) { self.remote(''); });
}
HomeRepositoryViewModel.prototype.remove = function() {
  this.app.repoList.remove(this.path);
  this.home.update();
}

function HomeViewModel(app) {
  var self = this;
  this.app = app;
  this.repos = ko.observableArray();
  this.showNux = ko.computed(function() {
    return self.repos().length == 0;
  });
}
HomeViewModel.prototype.updateNode = function(parentElement) {
  ko.renderTemplate('home', this, {}, parentElement);
}
HomeViewModel.prototype.template = 'home';
HomeViewModel.prototype.shown = function() {
  this.update();
}
HomeViewModel.prototype.update = function() {
  var self = this;
  var reposByPath = {};
  this.repos().forEach(function(repo) { reposByPath[repo.path] = repo; });
  this.repos(this.app.repoList().sort().map(function(path) {
    if (!reposByPath[path])
      reposByPath[path] = new HomeRepositoryViewModel(self, path);
    return reposByPath[path];
  }));
}

},{"knockout":"knockout","ungit-components":"ungit-components"}]},{},[1])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJjb21wb25lbnRzL2hvbWUvaG9tZS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQ0FBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsIlxudmFyIGtvID0gcmVxdWlyZSgna25vY2tvdXQnKTtcbnZhciBjb21wb25lbnRzID0gcmVxdWlyZSgndW5naXQtY29tcG9uZW50cycpO1xuXG5jb21wb25lbnRzLnJlZ2lzdGVyKCdob21lJywgZnVuY3Rpb24oYXJncykge1xuICByZXR1cm4gbmV3IEhvbWVWaWV3TW9kZWwoYXJncy5hcHApO1xufSk7XG5cbmZ1bmN0aW9uIEhvbWVSZXBvc2l0b3J5Vmlld01vZGVsKGhvbWUsIHBhdGgpIHtcbiAgdGhpcy5ob21lID0gaG9tZTtcbiAgdGhpcy5hcHAgPSBob21lLmFwcDtcbiAgdGhpcy5zZXJ2ZXIgPSB0aGlzLmFwcC5zZXJ2ZXI7XG4gIHRoaXMucGF0aCA9IHBhdGg7XG4gIHRoaXMudGl0bGUgPSBwYXRoO1xuICB0aGlzLmxpbmsgPSB1bmdpdC5jb25maWcucm9vdFBhdGggKyAnLyMvcmVwb3NpdG9yeT9wYXRoPScgKyBlbmNvZGVVUklDb21wb25lbnQocGF0aCk7XG4gIHRoaXMucGF0aFJlbW92ZWQgPSBrby5vYnNlcnZhYmxlKGZhbHNlKTtcbiAgdGhpcy5yZW1vdGUgPSBrby5vYnNlcnZhYmxlKCcuLi4nKTtcbiAgdGhpcy51cGRhdGVTdGF0ZSgpO1xufVxuSG9tZVJlcG9zaXRvcnlWaWV3TW9kZWwucHJvdG90eXBlLnVwZGF0ZVN0YXRlID0gZnVuY3Rpb24oKSB7XG4gIHZhciBzZWxmID0gdGhpcztcbiAgdGhpcy5zZXJ2ZXIuZ2V0UHJvbWlzZSgnL2ZzL2V4aXN0cz9wYXRoPScgKyBlbmNvZGVVUklDb21wb25lbnQodGhpcy5wYXRoKSlcbiAgICAudGhlbihmdW5jdGlvbihleGlzdHMpIHsgc2VsZi5wYXRoUmVtb3ZlZCghZXhpc3RzKTsgfSk7XG4gIHRoaXMuc2VydmVyLmdldFByb21pc2UoJy9yZW1vdGVzL29yaWdpbj9wYXRoPScgKyBlbmNvZGVVUklDb21wb25lbnQodGhpcy5wYXRoKSlcbiAgICAudGhlbihmdW5jdGlvbihyZW1vdGUpIHtcdHNlbGYucmVtb3RlKHJlbW90ZS5hZGRyZXNzLnJlcGxhY2UoL1xcL1xcLy4qP1xcQC8sIFwiLy8qKipAXCIpKTsgfSlcbiAgICAuY2F0Y2goZnVuY3Rpb24oZXJyKSB7IHNlbGYucmVtb3RlKCcnKTsgfSk7XG59XG5Ib21lUmVwb3NpdG9yeVZpZXdNb2RlbC5wcm90b3R5cGUucmVtb3ZlID0gZnVuY3Rpb24oKSB7XG4gIHRoaXMuYXBwLnJlcG9MaXN0LnJlbW92ZSh0aGlzLnBhdGgpO1xuICB0aGlzLmhvbWUudXBkYXRlKCk7XG59XG5cbmZ1bmN0aW9uIEhvbWVWaWV3TW9kZWwoYXBwKSB7XG4gIHZhciBzZWxmID0gdGhpcztcbiAgdGhpcy5hcHAgPSBhcHA7XG4gIHRoaXMucmVwb3MgPSBrby5vYnNlcnZhYmxlQXJyYXkoKTtcbiAgdGhpcy5zaG93TnV4ID0ga28uY29tcHV0ZWQoZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHNlbGYucmVwb3MoKS5sZW5ndGggPT0gMDtcbiAgfSk7XG59XG5Ib21lVmlld01vZGVsLnByb3RvdHlwZS51cGRhdGVOb2RlID0gZnVuY3Rpb24ocGFyZW50RWxlbWVudCkge1xuICBrby5yZW5kZXJUZW1wbGF0ZSgnaG9tZScsIHRoaXMsIHt9LCBwYXJlbnRFbGVtZW50KTtcbn1cbkhvbWVWaWV3TW9kZWwucHJvdG90eXBlLnRlbXBsYXRlID0gJ2hvbWUnO1xuSG9tZVZpZXdNb2RlbC5wcm90b3R5cGUuc2hvd24gPSBmdW5jdGlvbigpIHtcbiAgdGhpcy51cGRhdGUoKTtcbn1cbkhvbWVWaWV3TW9kZWwucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uKCkge1xuICB2YXIgc2VsZiA9IHRoaXM7XG4gIHZhciByZXBvc0J5UGF0aCA9IHt9O1xuICB0aGlzLnJlcG9zKCkuZm9yRWFjaChmdW5jdGlvbihyZXBvKSB7IHJlcG9zQnlQYXRoW3JlcG8ucGF0aF0gPSByZXBvOyB9KTtcbiAgdGhpcy5yZXBvcyh0aGlzLmFwcC5yZXBvTGlzdCgpLnNvcnQoKS5tYXAoZnVuY3Rpb24ocGF0aCkge1xuICAgIGlmICghcmVwb3NCeVBhdGhbcGF0aF0pXG4gICAgICByZXBvc0J5UGF0aFtwYXRoXSA9IG5ldyBIb21lUmVwb3NpdG9yeVZpZXdNb2RlbChzZWxmLCBwYXRoKTtcbiAgICByZXR1cm4gcmVwb3NCeVBhdGhbcGF0aF07XG4gIH0pKTtcbn1cbiJdfQ==
